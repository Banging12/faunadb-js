'use strict';

Object.defineProperty(exports, '__esModule', {
  value: true
});
exports.toJSON = toJSON;
exports.parseJSON = parseJSON;

var _objects = require('./objects');

function toJSON(object) {
  var pretty = arguments.length <= 1 || arguments[1] === undefined ? false : arguments[1];

  return pretty ? JSON.stringify(object, null, '  ') : JSON.stringify(object);
}

function parseJSON(json) {
  return JSON.parse(json, json_parse);
}

function json_parse(_, val) {
  if (typeof val !== 'object' || val === null) return val;else if ('@ref' in val) return new _objects.Ref(val['@ref']);else if ('@obj' in val) return val['@obj'];else if ('@set' in val) return new _objects.FaunaSet(val['@set']);else if ('@ts' in val) return new _objects.FaunaTime(val['@ts']);else if ('@date' in val) return new _objects.FaunaDate(val['@date']);else return val;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9fanNvbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozt1QkFBa0QsV0FBVzs7QUFFdEQsU0FBUyxNQUFNLENBQUMsTUFBTSxFQUFnQjtNQUFkLE1BQU0seURBQUMsS0FBSzs7QUFDekMsU0FBTyxNQUFNLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxNQUFNLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLENBQUE7Q0FDNUU7O0FBRU0sU0FBUyxTQUFTLENBQUMsSUFBSSxFQUFFO0FBQzlCLFNBQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLEVBQUUsVUFBVSxDQUFDLENBQUE7Q0FDcEM7O0FBRUQsU0FBUyxVQUFVLENBQUMsQ0FBQyxFQUFFLEdBQUcsRUFBRTtBQUMxQixNQUFJLE9BQU8sR0FBRyxLQUFLLFFBQVEsSUFBSSxHQUFHLEtBQUssSUFBSSxFQUN6QyxPQUFPLEdBQUcsQ0FBQSxLQUNQLElBQUksTUFBTSxJQUFJLEdBQUcsRUFDcEIsT0FBTyxpQkFBUSxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQSxLQUN4QixJQUFJLE1BQU0sSUFBSSxHQUFHLEVBQ3BCLE9BQU8sR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFBLEtBQ2YsSUFBSSxNQUFNLElBQUksR0FBRyxFQUNwQixPQUFPLHNCQUFhLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFBLEtBQzdCLElBQUksS0FBSyxJQUFJLEdBQUcsRUFDbkIsT0FBTyx1QkFBYyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQSxLQUM3QixJQUFJLE9BQU8sSUFBSSxHQUFHLEVBQ3JCLE9BQU8sdUJBQWMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUEsS0FFbEMsT0FBTyxHQUFHLENBQUE7Q0FDYiIsImZpbGUiOiJfanNvbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7RmF1bmFEYXRlLCBGYXVuYVNldCwgRmF1bmFUaW1lLCBSZWZ9IGZyb20gJy4vb2JqZWN0cydcblxuZXhwb3J0IGZ1bmN0aW9uIHRvSlNPTihvYmplY3QsIHByZXR0eT1mYWxzZSkge1xuICByZXR1cm4gcHJldHR5ID8gSlNPTi5zdHJpbmdpZnkob2JqZWN0LCBudWxsLCAnICAnKSA6IEpTT04uc3RyaW5naWZ5KG9iamVjdClcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlSlNPTihqc29uKSB7XG4gIHJldHVybiBKU09OLnBhcnNlKGpzb24sIGpzb25fcGFyc2UpXG59XG5cbmZ1bmN0aW9uIGpzb25fcGFyc2UoXywgdmFsKSB7XG4gIGlmICh0eXBlb2YgdmFsICE9PSAnb2JqZWN0JyB8fCB2YWwgPT09IG51bGwpXG4gICAgcmV0dXJuIHZhbFxuICBlbHNlIGlmICgnQHJlZicgaW4gdmFsKVxuICAgIHJldHVybiBuZXcgUmVmKHZhbFsnQHJlZiddKVxuICBlbHNlIGlmICgnQG9iaicgaW4gdmFsKVxuICAgIHJldHVybiB2YWxbJ0BvYmonXVxuICBlbHNlIGlmICgnQHNldCcgaW4gdmFsKVxuICAgIHJldHVybiBuZXcgRmF1bmFTZXQodmFsWydAc2V0J10pXG4gIGVsc2UgaWYgKCdAdHMnIGluIHZhbClcbiAgICByZXR1cm4gbmV3IEZhdW5hVGltZSh2YWxbJ0B0cyddKVxuICBlbHNlIGlmICgnQGRhdGUnIGluIHZhbClcbiAgICByZXR1cm4gbmV3IEZhdW5hRGF0ZSh2YWxbJ0BkYXRlJ10pXG4gIGVsc2VcbiAgICByZXR1cm4gdmFsXG59XG4iXX0=